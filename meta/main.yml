---
dependencies:
  - role: meta/repository
    repository_key: '0xb9316a7bc7917b12'
    repository_url: 'deb http://ppa.launchpad.net/chris-lea/nginx-devel/ubuntu trusty main'

  - role: meta/monitor
    monitor_name: nginx
    monitor_pidfile: "{{ nginx_pidfile_path }}"

  - role: meta/log-aggregator
    logging_name: nginx 
    logging_files:
      - path: "{{ nginx_error_log_path }}"
        tag: nginx.error
      - path: "{{ nginx_access_log_path }}"
        tag: nginx.access

  - role: package/logrotate
    logrotate_name: nginx
    logrotate_create_logs_with_owner: "{{ nginx_user }}"
